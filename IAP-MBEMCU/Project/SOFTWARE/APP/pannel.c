#define _PANNEL_C_

#include "includes.h"

//#include "compile.h"
//#include "pannel.h"
//#include "pannel_includ.h"

//#include "libr.h"
//#include "main.h"

//#include "tw8836_func.h"



//#include "i2c_driver.h"
//#include "Port.h"


static BYTE const tInit_tw8836_9inch[] =
{
	0xFF, 0x00,  //; Page 00
0x02, 0xCB,
0x03, 0xFF,
0x04, 0x00,
0x06, 0x06,
0x07, 0x02,
0x08, 0x80,
0x0F, 0x00,
0x1F, 0x00,
0x40, 0x01,
0x41, 0x11,
0x42, 0x15,
0x43, 0x04,
0x44, 0xE0,
0x45, 0x09,
0x46, 0x00,
0x47, 0x00,
0x48, 0x00,
0x4B, 0x00,
0x50, 0x0E,
0x51, 0x00,
0x52, 0x00,
0x53, 0x05,
0x54, 0x00,
0x56, 0x00,
0x57, 0x00,
0x5F, 0x00,
0x60, 0x00,
0x66, 0x00,
0x67, 0x00,
0x68, 0x00,
0x69, 0x02,
0x6A, 0x20,
0x6B, 0xF0,
0x6C, 0x20,
0x6D, 0xD0,
0x6E, 0x10,
0x6F, 0x10,
0xD4, 0x00,
0xE7, 0x16,
0xE8, 0x02,
0xE9, 0x00,
0xEA, 0x00,
0xEB, 0x40,
0xEC, 0x30,
0xED, 0x21,
0xF6, 0x00,
0xF7, 0x16,
0xF8, 0x01,
0xF9, 0x00,
0xFA, 0x00,
0xFB, 0x40,
0xFC, 0x30,
0xFD, 0x31,

0xFF, 0x01,  //; Page 01
0x01, 0x93,
0x02, 0x4E,
0x04, 0x00,
0x05, 0x00,
0x06, 0x00,
0x07, 0x02,
0x08, 0x15,
0x09, 0xF0,
0x0A, 0x0F,
0x0B, 0xD0,
0x0C, 0xCC,
0x0D, 0x00,
0x10, 0x80,
0x11, 0x5C,
0x12, 0x11,
0x13, 0x80,
0x14, 0x80,
0x15, 0x00,
0x17, 0x80,
0x18, 0x44,
0x1A, 0x10,
0x1B, 0x00,
0x1C, 0x27,
0x1D, 0x7F,
0x1E, 0x00,
0x1F, 0x00,
0x20, 0x50,
0x21, 0x12,
0x22, 0xF0,
0x23, 0xD8,
0x24, 0xBC,
0x25, 0xB8,
0x26, 0x44,
0x27, 0x38,
0x28, 0x00,
0x29, 0x00,
0x2A, 0x78,
0x2B, 0x44,
0x2C, 0x30,
0x2D, 0x14,
0x2E, 0xA5,
0x2F, 0xE6,
0x30, 0xD0,
0x31, 0x00,
0x32, 0x00,
0x33, 0x45,
0x34, 0x1A,
0x35, 0x00,
0x36, 0xE3,
0x37, 0x28,
0x38, 0xAF,
0x40, 0x00,
0x41, 0x80,
0x42, 0x00,
0xC0, 0x38,
0xC1, 0xC7,
0xC2, 0xD1,
0xC3, 0x03,
0xC4, 0x0E,
0xC5, 0x16,
0xC6, 0x20,
0xC7, 0x04,
0xC8, 0x00,
0xC9, 0x06,
0xCA, 0x06,
0xCB, 0x56,
0xCC, 0x10,
0xCD, 0x54,
0xD0, 0x00,
0xD1, 0xF0,
0xD2, 0xF0,
0xD3, 0xF0,
0xD4, 0x80,
0xD5, 0x00,
0xD6, 0x10,
0xD7, 0x2A,
0xD8, 0x00,
0xD9, 0x04,
0xDA, 0x80,
0xDB, 0x80,
0xDC, 0x20,
0xE0, 0x00,
0xE1, 0x05,
0xE2, 0xD9,
0xE3, 0x07,
0xE4, 0x33,
0xE5, 0x31,
0xE6, 0x00,
0xE7, 0x2A,
0xE8, 0x01,
0xE9, 0x00,
0xEA, 0x03,
0xF6, 0x30,
0xF7, 0x00,
0xF8, 0x00,
0xF9, 0x00,
0xFA, 0x38,

0xFF, 0x02,  //; Page 02
0x01, 0x80,
0x02, 0xE0,
0x03, 0x74,
0x04, 0x19,
0x05, 0x7d,
0x06, 0x1f,
0x07, 0x80,
0x08, 0x12,
0x09, 0x00,
0x0A, 0x05,
0x0B, 0x0E,
0x0C, 0x97,
0x0D, 0x81,
0x0E, 0x20,
0x0F, 0x03,
0x10, 0x40,
0x11, 0x00,
0x12, 0x25,
0x13, 0x00,
0x14, 0x00,
0x15, 0x0D,
0x16, 0xE0,
0x17, 0x01,
0x18, 0x00,
0x19, 0xDA,
0x1A, 0x00,
0x1B, 0x00,
0x1C, 0x52,
0x1D, 0x60,
0x1E, 0x11,
0x20, 0x00,
0x21, 0x00,
0x40, 0x10,
0x41, 0x00,
0x42, 0x05,
0x43, 0x01,
0x44, 0x64,
0x45, 0xF4,
0x46, 0x00,
0x47, 0x0A,
0x48, 0x36,
0x49, 0x10,
0x4A, 0x00,
0x4B, 0x00,
0x4C, 0x00,
0x4D, 0x44,
0x4E, 0x04,
0xE4, 0x00,
0xF8, 0x00,
0xF9, 0x80,

0xFF, 0x04,  //; Page 04
0xe0, 0x01,
0xe1, 0xe0,


0xFF, 0x06,  //; Page 06
0x40, 0x0C,
0x41, 0x00,
0x42, 0x01,
0x43, 0xC0,
0x44, 0x00,
0x46, 0x01,
0x48, 0x07,
0x49, 0x11,
0x4A, 0x00,
0x4B, 0x30,
0x4C, 0x40,
0x4D, 0x17,

0xff,0xff,

};

static BYTE const tInit_DTV_9inch[]={
#if 0	

#else 

	0xFF, 0x00,  //; Page 00
0x02, 0xCB,
0x03, 0xFF,
0x04, 0x00,
0x06, 0x06,
0x07, 0x02,
0x08, 0x80,
0x0F, 0x00,
0x1F, 0x00,
0x40, 0x02,
0x41, 0x11,//0x13,11
0x42, 0x15,
0x43, 0x25,//0x24,//
0x44, 0xE0,
0x45, 0x41,//0x3C,09
0x46, 0x05,//0x00
0x47, 0x20,//0x00
0x48, 0x00,
0x4B, 0x00,
0x50, 0x0E,
0x51, 0x00,
0x52, 0x00,
0x53, 0x05,
0x54, 0x00,
0x56, 0x00,
0x57, 0x00,
0x5F, 0x00,
0x60, 0x00,
0x66, 0x00,
0x67, 0x00,
0x68, 0x00,
0x69, 0x02,
0x6A, 0x20,
0x6B, 0xF0,
0x6C, 0x20,
0x6D, 0xD0,
0x6E, 0x10,
0x6F, 0x10,
0xD4, 0x00,
0xE7, 0x16,
0xE8, 0x02,
0xE9, 0x00,
0xEA, 0x00,
0xEB, 0x40,
0xEC, 0x30,
0xED, 0x21,
0xF6, 0x00,
0xF7, 0x16,
0xF8, 0x01,
0xF9, 0x00,
0xFA, 0x00,
0xFB, 0x40,
0xFC, 0x30,
0xFD, 0x31,

0xFF, 0x01,  //; Page 01
0x01, 0x93,
0x02, 0x4E,
0x04, 0x00,
0x05, 0x00,
0x06, 0x00,
0x07, 0x02,
0x08, 0x15,
0x09, 0xF0,
0x0A, 0x0F,
0x0B, 0xD0,
0x0C, 0xCC,
0x0D, 0x00,
0x10, 0x80,
0x11, 0x5C,
0x12, 0x11,
0x13, 0x80,
0x14, 0x80,
0x15, 0x00,
0x17, 0x80,
0x18, 0x44,
0x1A, 0x10,
0x1B, 0x00,
0x1C, 0x27,
0x1D, 0x7F,
0x1E, 0x00,
0x1F, 0x00,
0x20, 0x50,
0x21, 0x12,
0x22, 0xF0,
0x23, 0xD8,
0x24, 0xBC,
0x25, 0xB8,
0x26, 0x44,
0x27, 0x38,
0x28, 0x00,
0x29, 0x00,
0x2A, 0x78,
0x2B, 0x44,
0x2C, 0x30,
0x2D, 0x14,
0x2E, 0xA5,
0x2F, 0xE6,
0x30, 0xD0,
0x31, 0x00,
0x32, 0x00,
0x33, 0x45,
0x34, 0x1A,
0x35, 0x00,
0x36, 0xE3,
0x37, 0x28,
0x38, 0xAF,
0x40, 0x00,
0x41, 0x80,
0x42, 0x00,
0xC0, 0x38,
0xC1, 0xC7,
0xC2, 0xD1,
0xC3, 0x03,
0xC4, 0x0E,
0xC5, 0x16,
0xC6, 0x20,
0xC7, 0x04,
0xC8, 0x00,
0xC9, 0x06,
0xCA, 0x06,
0xCB, 0x56,
0xCC, 0x10,
0xCD, 0x54,
0xD0, 0x00,
0xD1, 0xF0,
0xD2, 0xF0,
0xD3, 0xF0,
0xD4, 0x80,
0xD5, 0x00,
0xD6, 0x10,
0xD7, 0x2A,
0xD8, 0x00,
0xD9, 0x04,
0xDA, 0x80,
0xDB, 0x80,
0xDC, 0x20,
0xE0, 0x00,
0xE1, 0x05,
0xE2, 0xD9,
0xE3, 0x07,
0xE4, 0x33,
0xE5, 0x31,
0xE6, 0x00,
0xE7, 0x2A,
0xE8, 0x01,
0xE9, 0x00,
0xEA, 0x03,
0xF6, 0x30,
0xF7, 0x00,
0xF8, 0x00,
0xF9, 0x00,
0xFA, 0x38,

0xFF, 0x02,  //; Page 02
0x01, 0x80,
0x02, 0xE0,
0x03, 0x00,//00
0x04, 0x20,//10
0x05, 0xf1,//0x00,//7f
0x06, 0x1f,//0x20,
0x07, 0x80,
0x08, 0x12,
0x09, 0x00,//0x00
0x0A, 0x04,//0x04
0x0B, 0x0E,
0x0C, 0x14,//0x2B
0x0D, 0x81,
0x0E, 0x50,//0x30
0x0F, 0x03,
0x10, 0x42,
0x11, 0x00,
0x12, 0x25,
0x13, 0x00,
0x14, 0x00,
0x15, 0x22,//0x0D
0x16, 0xE0,
0x17, 0x01,
0x18, 0x00,
0x19, 0xDA,
0x1A, 0x00,
0x1B, 0x00,
0x1C, 0x52,
0x1D, 0x60,
0x1E, 0x10,
0x20, 0x00,
0x21, 0x00,
0x40, 0x10,
0x41, 0x00,
0x42, 0x05,
0x43, 0x01,
0x44, 0x64,
0x45, 0xF4,
0x46, 0x00,
0x47, 0x0A,
0x48, 0x36,
0x49, 0x10,
0x4A, 0x00,
0x4B, 0x00,
0x4C, 0x00,
0x4D, 0x44,
0x4E, 0x04,

0x81, 0x85,//0xa0,add
0x82, 0x85,//0xa0
0x83, 0x85,//0xa0
0x84, 0x80,//0x75
		0x87, 0x85,//0x70
		0x88, 0x85,//0x70
		0x89, 0x85,//0x70
		0x8a, 0x70,

0xE4, 0x00,
0xF8, 0x00,
0xF9, 0x80,

0xFF, 0x04,  //; Page 04
0xe0, 0x01,
0xe1, 0xe0,


0xFF, 0x06,  //; Page 06
0x40, 0x0C,
0x41, 0x00,
0x42, 0x01,
0x43, 0xC0,
0x44, 0x00,
0x46, 0x01,
0x48, 0x07,
0x49, 0x11,
0x4A, 0x00,
0x4B, 0x30,
0x4C, 0x40,
0x4D, 0x17,

0xff,0xff,


#endif

};
void SetAutoDetectStd(void)
{
    BYTE val;
    BYTE page;

    page = ReadTW88(0xFF);

    val = ReadTW88_Page(0xb09);
    WriteTW88(0x09,val|0x01);		// SDTR

    WriteTW88(0xFF,page);
}


void Pannel_include(void)
{

}

void WritePannelData(BYTE sys)
{


    switch(sys)
    {
    case	Pannel_init_tw8836:
    case	Pannel_Poweron:
    case	Pannel_poweroff:
    case	Pannel_init_osd:
    case Pannel_TW8836_SWRST:
        WritePannelData_Func(sys);
        break;
    //case	Pannel_init_tw8836:
    case Pannel_ARM_type:
    case Pannel_CarMedia_type:
    case Pannel_CVBS_type:
        WritePannelData_Func(sys);
        //Delay_1ms(100);//
        //BackLight(1);
        break;
    default:
        return;
    }
}

void WritePannelData_Func(BYTE sys)
{
    UINT j ;
    BYTE index,val;



    for(j = 0; j<8194; j += 2)
    {

        switch(sys)
        {
        case	Pannel_init_tw8836:
            index =tInit_tw8836_9inch[j];
            val =tInit_tw8836_9inch[j+1];
            break;
       
        case Pannel_DTV_type:
            index = tInit_DTV_9inch[j];
            val = tInit_DTV_9inch[j+1];
            break;
			
        default:
            return;
        }

        if(val == 0xFF && index == 0xFF)
            break;

        WriteTW88(index, val);

    }

    //SetAutoDetectStd();//自动制式检测


    WriteTW88(0xff, 0x00);		// set page 0
    //PannelType_last=sys;
}

void TW8836_Reset(void)
{
    GPIO_ResetBits(TW8836_RST_PORT, TW8836_RST_PIN);
    Delay_1ms(50);
    GPIO_SetBits(TW8836_RST_PORT, TW8836_RST_PIN);
///	Delay_1ms(100);
}


